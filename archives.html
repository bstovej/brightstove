---
layout: default
title: Archives
permalink: /archives/
---

<div class="archives-page">
  <h1>Blog Archives</h1>

  <!-- Calendar Container -->
  <div id="calendar-container" class="calendar-wrapper">
    <!-- Calendar will be injected here by JS -->
  </div>

  <script>
    // Generate post data for the calendar
    const postData = {
      {% for post in site.posts %}
        "{{ post.date | date: '%Y-%m-%d' }}": {
          "url": "{{ post.url | relative_url }}",
          "title": "{{ post.title | escape }}"
        }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    };

    function renderCalendar(year, month, container) {
      const date = new Date(year, month, 1);
      const monthName = date.toLocaleString('default', { month: 'long' });
      
      let html = `<div class="calendar-month">
        <h4 class="calendar-month-title">${monthName} ${year}</h4>
        <table class="calendar-table">
          <thead>
            <tr>
              <th>Su</th><th>Mo</th><th>Tu</th><th>We</th><th>Th</th><th>Fr</th><th>Sa</th>
            </tr>
          </thead>
          <tbody>`;
      
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      
      let day = 1;
      for (let i = 0; i < 6; i++) {
        html += '<tr>';
        for (let j = 0; j < 7; j++) {
          if (i === 0 && j < firstDay) {
            html += '<td></td>';
          } else if (day > daysInMonth) {
            html += '<td></td>';
          } else {
            const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
            if (postData[dateStr]) {
              html += `<td class="calendar-day has-post"><a href="${postData[dateStr].url}" title="${postData[dateStr].title}">${day}</a></td>`;
            } else {
              html += `<td class="calendar-day">${day}</td>`;
            }
            day++;
          }
        }
        html += '</tr>';
        if (day > daysInMonth) break;
      }
      
      html += '</tbody></table></div>';
      container.innerHTML += html;
    }

    const container = document.getElementById('calendar-container');
    const today = new Date();
    
    // We want to show the current month and the previous month
    const year = today.getFullYear();
    const month = today.getMonth();
    
    const prevDate = new Date(year, month - 1, 1);
    renderCalendar(prevDate.getFullYear(), prevDate.getMonth(), container);
    renderCalendar(year, month, container);
  </script>

  <div class="archives-list-container">
    {% assign postsByYear = site.posts | group_by_exp: "post", "post.date | date: '%Y'" %}
    
    {% for year in postsByYear %}
      <h2 id="{{ year.name }}">{{ year.name }}</h2>
      
      {% assign postsByMonth = year.items | group_by_exp: "post", "post.date | date: '%B'" %}
      {% for month in postsByMonth %}
        <h3 id="{{ month.name }}-{{ year.name }}">{{ month.name }}</h3>
        <ul class="post-list">
          {% for post in month.items %}
            <li class="post-list-item">
              <span class="post-meta">{{ post.date | date: "%b %-d" }}</span>
              <h4><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h4>
              <div class="post-excerpt">
                {{ post.excerpt | strip_html | truncatewords: 30 }}
              </div>
            </li>
          {% endfor %}
        </ul>
      {% endfor %}
    {% endfor %}
  </div>
</div>
